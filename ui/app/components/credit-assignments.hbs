<div>
  {{#unless this.disabled}}
    <div class="mb-2">
      <button
        type="button"
        onclick={{fn this.showEdit @creditable}}
        class="flex hover:underline content-center"
      >
        <FaIcon @size="xs" @icon="plus" class="mr-2 text-gray-400 hover:text-gray-800" />
        <span>Add credit</span>
      </button>
    </div>
  {{/unless}}
  {{#check-empty
    count=@creditAssignments.length
    noResultsMessage="No credits assigned"
  }}
    <ul class="list-reset credit-assignments my-2">
      {{#each this.creditAssignmentsList as |creditAssignment|}}
        <CreditAssignments::Item
          @creditAssignment={{creditAssignment}}
          @editCreditAssignment={{fn this.showEdit @creditable creditAssignment}}
          @disabled={{this.disabled}}
          @deleteCreditAssignment={{fn this.deleteCreditAssignment creditAssignment}}
          as |cai|
        >
          {{yield
            (hash
              creditAssignment=creditAssignment
              credit=cai.credit
              disabled=this.disabled
            )
          }}
        </CreditAssignments::Item>
      {{/each}}
    </ul>
  {{/check-empty}}
</div>


{{#if this.showEditDialog}}
  <ModalDialog
    @containerClass="pointer-events-auto w-full md:w-1/2 xl:w-1/3"
    @translucentOverlay={{true}}
    @overlayClass="pointer-events-none"
  >
    <div class="w-full">
      <CreditAssignments::CreateEditDialog
        @model={{this.editCreditAssignment}}
        @creditable={{this.editCreditable}}
        @searchCredits={{fn this.searchCredits}}
        @save={{fn this.saveCreditAssignment target=this}}
        @saveCreditAssignmentError={{fn this.saveCreditAssignmentError}}
        @close={{fn this.closeEdit}}
      />
    </div>
  </ModalDialog>
{{/if}}