<h3>Add credit assignment</h3>
<TForm
  @save={{@save}}
  @reportError={{@reportError}}
  @validator={{this.validator}}
  @model={{@model}}
  as |form|
>
  {{#if form.showErrors}}
    <ErrorFlash
      @error={{@saveCreditAssignmentError}}
      @defaultMessage="Failed to save credit assignment"
    />
  {{/if}}

  <fieldset>
    <p>
      <FormInput
        @error={{form.errors.credit}}
        @showError={{form.showErrors}}
        @label="Course"
      >
        <TTypeAhead
          autofocus
          @name="credit"
          @placeholder="Type a course name or course code to match"
          @value={{form.relationships.credit.id}}
          @results={{this.creditResult}}
          @onSearch={{fn this.searchCredits}}
          @onChange={{fn form.onChangeRelationship}}
        />
      </FormInput>
    </p>
  </fieldset>
  <fieldset>
    <p>
      <FormInput
        @error={{form.errors.creditHours}}
        @showError={{form.showErrors}}
        @label="Credits"
      >
        <input
          type="number"
          step="0.25"
          min="0"
          name="creditHours"
          data-test-credit-hours
          value={{form.pojo.creditHours}}
          onchange={{fn form.onChange}}
        >
      </FormInput>
    </p>
  </fieldset>
  <fieldset>
    <p>
      <FormInput
        @error={{form.errors.note}}
        @showError={{form.showErrors}}
        @label="Notes"
      >
        <textarea
          value={{form.pojo.note}}
          name="note"
          onchange={{fn form.onChange}}
        />
      </FormInput>
    </p>
  </fieldset>
  <TFormActionsRow>
    <TLink
      @action={{fn @close}}
    >
      Cancel
    </TLink>
  </TFormActionsRow>
</TForm>